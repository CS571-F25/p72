import{r as s,j as t,a as j}from"./index-C4bgWChJ.js";function S({lat:c,lon:u}){const[h,d]=s.useState(!0),[m,p]=s.useState(null),[x,g]=s.useState([]),y="°F",v="UTC";s.useEffect(()=>{let e=!0;return(async()=>{d(!0),p(null);try{const r="https://weather-app-backend-blond.vercel.app",n=new URLSearchParams({location:`${c},${u}`}),i=r?`${r}/api/weather-forecast?${n.toString()}`:`/api/weather-forecast?${n.toString()}`,o=(await j.get(i)).data,l=o?.data?.timelines?.[0]?.intervals||o?.timelines?.[0]?.intervals||o?.data?.intervals||o?.intervals;if(!l||!Array.isArray(l)||l.length===0)throw new Error("No hourly data returned");e&&g(l.slice(0,24))}catch(r){e&&p(r?.message||String(r))}finally{e&&d(!1)}})(),()=>{e=!1}},[c,u]);const w=s.useMemo(()=>x.map(e=>{const a=new Date(e.startTime),r=e.values?.temperature??e.values?.temperatureApparent??null,n=r==null?null:Math.round(r),i=e.values?.precipitationProbability??e.values?.precipitation??null,f=e.values?.windSpeed??null;return{t:a,temp:n,pop:i,wind:f}}),[x]);return h?t.jsxs("div",{className:"py-2",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:"Hourly (24h)"}),t.jsx("div",{className:"mt-2",children:"Loading hourly forecast…"})]}):m?t.jsxs("div",{className:"py-2 text-sm text-red-500",children:["Error loading forecast: ",m]}):t.jsxs("div",{className:"py-2",children:[t.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Hourly (24h)"}),t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:w.map((e,a)=>t.jsxs("div",{className:"flex-none w-20 p-2 rounded-lg bg-gray-50 dark:bg-slate-800 text-center",children:[t.jsx("div",{className:"text-xs text-muted-foreground",children:e.t.toLocaleTimeString([],{hour:"numeric",timeZone:v})}),t.jsx("div",{className:"text-sm font-medium mt-1",children:e.temp==null?"—":`${e.temp}${y}`})]},a))})]})}export{S as default};
