import{r as s,j as t,a as j}from"./index-DIkEXiqE.js";function S({lat:u,lon:d}){const[h,m]=s.useState(!0),[p,x]=s.useState(null),[a,g]=s.useState([]),y="°F",v="UTC";s.useEffect(()=>{let e=!0;return(async()=>{m(!0),x(null);try{const r="https://weather-app-backend-blond.vercel.app",o=new URLSearchParams({location:`${u},${d}`}),c=r?`${r}/api/weather-forecast?${o.toString()}`:`/api/weather-forecast?${o.toString()}`,l=(await j.get(c)).data,i=l?.data?.timelines?.[0]?.intervals||l?.timelines?.[0]?.intervals||l?.data?.intervals||l?.intervals;if(!i||!Array.isArray(i)||i.length===0)throw new Error("No hourly data returned");e&&g(i.slice(0,24))}catch(r){e&&x(r?.message||String(r))}finally{e&&m(!1)}})(),()=>{e=!1}},[u,d]);const w=s.useMemo(()=>a.map(e=>{const n=new Date(e.startTime),r=e.values?.temperature??e.values?.temperatureApparent??null,o=r==null?null:Math.round(r),c=e.values?.precipitationProbability??e.values?.precipitation??null,f=e.values?.windSpeed??null;return{t:n,temp:o,pop:c,wind:f}}),[a]);return h&&a.length===0?t.jsxs("div",{className:"py-2",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:"Hourly (24h)"}),t.jsx("div",{className:"mt-2",children:"Loading hourly forecast…"})]}):p&&a.length===0?t.jsxs("div",{className:"py-2 text-sm text-red-500",children:["Error loading forecast: ",p]}):t.jsxs("div",{className:"py-2",children:[t.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Hourly (24h)"}),t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:w.map((e,n)=>t.jsxs("div",{className:"flex-none w-20 p-2 rounded-lg bg-gray-50 dark:bg-slate-800 text-center",children:[t.jsx("div",{className:"text-xs text-muted-foreground",children:e.t.toLocaleTimeString([],{hour:"numeric",timeZone:v})}),t.jsx("div",{className:"text-sm font-medium mt-1",children:e.temp==null?"—":`${e.temp}${y}`})]},n))})]})}export{S as default};
