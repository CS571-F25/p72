import{r as a,a as f,j as r}from"./index-B0nc7qAf.js";function E({lat:c,lon:u}){const[g,d]=a.useState(!0),[m,p]=a.useState(null),[n,v]=a.useState([]),x=a.useRef([]);x.current=n;const y="°F",w="UTC";a.useEffect(()=>{const e=new AbortController;return x.current.length===0&&d(!0),p(null),(async()=>{try{const t="https://weather-app-backend-blond.vercel.app",o=new URLSearchParams({location:`${c},${u}`}),i=t?`${t}/api/weather-forecast?${o.toString()}`:`/api/weather-forecast?${o.toString()}`,s=(await f.get(i,{signal:e.signal})).data,l=s?.data?.timelines?.[0]?.intervals||s?.timelines?.[0]?.intervals||s?.data?.intervals||s?.intervals;if(!l||!Array.isArray(l)||l.length===0)throw new Error("No hourly data returned");v(l.slice(0,24))}catch(t){if(t?.name==="CanceledError"||t?.name==="AbortError"||t?.code==="ERR_CANCELED"||f.isCancel?.(t))return;p(t?.message||String(t))}finally{d(!1)}})(),()=>e.abort()},[c,u]);const b=a.useMemo(()=>n.map(e=>{const t=new Date(e.startTime),o=e.values?.temperature??e.values?.temperatureApparent??null,i=o==null?null:Math.round(o),h=e.values?.precipitationProbability??e.values?.precipitation??null,s=e.values?.windSpeed??null;return{t,temp:i,pop:h,wind:s}}),[n]);return g&&n.length===0?r.jsxs("div",{className:"py-2",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Hourly (24h)"}),r.jsx("div",{className:"mt-2",children:"Loading hourly forecast…"})]}):m&&n.length===0?r.jsxs("div",{className:"py-2 text-sm text-red-500",children:["Error loading forecast: ",m]}):r.jsxs("div",{className:"py-2",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Hourly (24h)"}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:b.map((e,t)=>r.jsxs("div",{className:"flex-none w-20 p-2 rounded-lg bg-gray-50 dark:bg-slate-800 text-center",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:e.t.toLocaleTimeString([],{hour:"numeric",timeZone:w})}),r.jsx("div",{className:"text-sm font-medium mt-1",children:e.temp==null?"—":`${e.temp}${y}`})]},t))})]})}export{E as default};
